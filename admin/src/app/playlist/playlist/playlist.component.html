<div class="main-container">
  <!-- Sidebar toggle button for mobile -->
  <button class="sidebar-toggle-mobile" (click)="toggleSidebar()" aria-label="Toggle sidebar">
    <i class="fas fa-bars"></i>
  </button>
  
  <!-- Sidebar overlay for mobile -->
  <div class="sidebar-overlay" *ngIf="sidebarOpen" (click)="closeSidebar()"></div>
  
  <div class="content-wrapper">
    <div class="sidebar" [class.open]="sidebarOpen">
      <div class="sidebar-header">
        <div class="sidebar-header-content">
          <div class="tabs">
            <button
              class="tab-button"
              [class.active]="activeTab === 'playlist'"
              (click)="switchTab('playlist')"
            >
              Playlist
            </button>
            <button
              class="tab-button"
              [class.active]="activeTab === 'manual'"
              (click)="switchTab('manual')"
            >
              Manual
            </button>
          </div>
          <button class="close-sidebar-btn" (click)="closeSidebar()" aria-label="Close sidebar">
            <i class="fas fa-times"></i>
          </button>
        </div>
      </div>
      <div class="tab-content">
        <app-playlist-list
          *ngIf="activeTab === 'playlist'"
          [selectedPlaylistGuid]="selectedPlaylistGuid"
          (playlistSelected)="onPlaylistSelected($event)"
          (playlistItemClick)="onPlaylistItemClick($event)"
          (playlistItemPageClick)="onPlaylistItemPageClick($event)"
          (playlistItemsLoaded)="onPlaylistItemsLoaded($event)"
        ></app-playlist-list>
        <app-manual
          *ngIf="activeTab === 'manual'"
          (itemClick)="onManualItemSelected($event.item, $event.page)"
        ></app-manual>
      </div>
    </div>
    <div class="content-area">
      <!-- Text Content -->
      <div *ngIf="currentContent?.type === 'text'" class="content-container text-container" #textContainer>
        <div class="text-content">{{ text }}</div>
      </div>

      <!-- Image Content -->
      <div *ngIf="currentContent?.type === 'image'" class="content-container image-container" #imageContainer>
        <img [src]="imageSrc" alt="Received image" class="display-image" />
      </div>

      <!-- URL Content (iframe) -->
      <div *ngIf="currentContent?.type === 'url'" class="content-container iframe-container">
        <iframe [src]="safeUrl" class="display-iframe" frameborder="0" allowfullscreen></iframe>
      </div>

      <!-- No content message -->
      <div *ngIf="!currentContent" class="content-container no-content">
        <div class="waiting-message">Waiting for content from WebSocket...</div>
      </div>
    </div>
  </div>
  
  <!-- Footer -->
  <div class="footer">
    <div class="footer-info">
      <div class="current-item-info">
        <div class="current-item-label">Current library item details:</div>
        <div class="current-item-guid" *ngIf="currentItemGuid">{{ currentItemGuid }}</div>
        <div class="current-item-name" *ngIf="currentItemName">{{ currentItemName }}</div>
        <div class="current-item-placeholder" *ngIf="!currentItemGuid">No item selected</div>
      </div>
      <div class="page-buttons-container" *ngIf="getAvailablePages().length > 0">
        <button
          *ngFor="let pageNum of getAvailablePages()"
          class="page-button"
          [class.active]="currentPage === pageNum"
          (click)="onPageButtonClick(pageNum)"
          [title]="'Go to page ' + pageNum"
        >
          {{ pageNum }}
        </button>
      </div>
    </div>
    <div class="footer-actions">
      <button 
        class="footer-button nav-button prev-button" 
        (click)="onPreviousClick()"
        [disabled]="!canGoPrevious()"
        title="Previous"
      >
        <i class="fas fa-chevron-left"></i>
      </button>
      <button 
        class="footer-button clear-button" 
        (click)="onClearClick()"
        title="Clear"
      >
        Clear
      </button>
      <button 
        class="footer-button nav-button next-button" 
        (click)="onNextClick()"
        [disabled]="!canGoNext()"
        title="Next"
      >
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
  </div>
</div>
